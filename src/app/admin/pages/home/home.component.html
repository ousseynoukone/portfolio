<!-- home.component.html -->
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <h1 class="mb-4">Dashboard Admin</h1>
      <p class="lead mb-4">Bienvenue dans le panneau d'administration de votre portfolio.</p>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="card h-100">
        <div class="card-body text-center">
          <i class="fas fa-folder-open fa-3x text-primary mb-3" data-fallback="üìÅ"></i>
          <h5 class="card-title">Gestion des Projets</h5>
          <p class="card-text">Cr√©ez, modifiez et organisez vos projets portfolio.</p>
          <a routerLink="/admin/projects" class="btn bg-accent-color text-white">G√©rer les Projets</a>
        </div>
      </div>
    </div>
    
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="card h-100">
        <div class="card-body text-center">
          <i class="fas fa-tools fa-3x text-success mb-3" data-fallback="üîß"></i>
          <h5 class="card-title">Comp√©tences</h5>
          <p class="card-text">Ajoutez et organisez vos comp√©tences techniques.</p>
          <a routerLink="/admin/abilities" class="btn bg-accent-color text-white">G√©rer les Comp√©tences</a>
        </div>
      </div>
    </div>
    
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="card h-100">
        <div class="card-body text-center">
          <i class="fas fa-sort-amount-down fa-3x text-warning mb-3" data-fallback="üìä"></i>
          <h5 class="card-title">Organisation</h5>
          <p class="card-text">Organisez l'ordre des projets et des images.</p>
          <a routerLink="/admin/order-projects" class="btn bg-accent-color text-white">Organiser</a>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row mt-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">Actions Rapides</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <a routerLink="/admin/projects" class="btn btn-outline-primary me-2 mb-2">
                <i class="fas fa-plus" data-fallback="‚ûï"></i> Nouveau Projet
              </a>
              <a routerLink="/admin/abilities" class="btn btn-outline-success me-2 mb-2">
                <i class="fas fa-plus" data-fallback="‚ûï"></i> Nouvelle Comp√©tence
              </a>
            </div>
            <div class="col-md-6 text-md-end">
              <a routerLink="/" class="btn btn-outline-secondary me-2 mb-2" target="_blank">
                <i class="fas fa-external-link-alt" data-fallback="üîó"></i> Voir le Site
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CV Management Section -->
  <div class="row mt-4 mb-5">
    <div class="col-12">
      <div class="card cv-management-card">
        <div class="card-header cv-header">
          <div class="d-flex align-items-center">
            <div class="cv-icon-header">
              <i class="fas fa-file-pdf"></i>
            </div>
            <div>
              <h5 class="mb-0">Gestion du CV</h5>
            </div>
          </div>
        </div>
        <div class="card-body p-4">
          @if (currentCv) {
            <div class="cv-file-info">
              <div class="cv-file-preview">
                <div class="cv-file-icon">
                  <i class="fas fa-file-pdf"></i>
                </div>
                <div class="cv-file-details">
                  <h6 class="cv-file-name">{{ currentCv.fileName }}</h6>
                  <div class="cv-file-meta">
                    <span class="cv-meta-item">
                      <i class="fas fa-weight me-1"></i>
                      {{ formatFileSize(currentCv.fileSize) }}
                    </span>
                    <span class="cv-meta-item">
                      <i class="fas fa-calendar me-1"></i>
                      {{ formatDate(currentCv.uploadDate) }}
                    </span>
                    <span class="cv-meta-item">
                      <i class="fas fa-clock me-1"></i>
                      {{ formatTime(currentCv.uploadDate) }}
                    </span>
                  </div>
                </div>
              </div>
              <div class="cv-actions">
                <button type="button" class="btn btn-primary btn-cv-action" (click)="fileInput.click()">
                  <i class="fas fa-upload me-2"></i>
                  Remplacer CV
                </button>
                <button type="button" class="btn btn-outline-danger btn-cv-action" (click)="deleteCv()">
                  <i class="fas fa-trash me-2"></i>
                  Supprimer
                </button>
              </div>
            </div>
          } @else {
            <div class="cv-empty-state">
              <div class="cv-empty-icon">
                <i class="fas fa-file-upload"></i>
              </div>
              <h6 class="cv-empty-title">Aucun CV disponible</h6>
              <p class="cv-empty-description">T√©l√©chargez votre CV pour le rendre disponible sur votre portfolio</p>
              <button type="button" class="btn btn-primary btn-cv-upload" (click)="fileInput.click()">
                <i class="fas fa-upload me-2"></i>
                T√©l√©charger mon CV
              </button>
            </div>
          }
          
          <!-- Upload Progress -->
          @if (isUploading) {
          <div class="cv-upload-progress">
            <div class="progress">
              <div class="progress-bar progress-bar-striped progress-bar-animated" 
                   [style.width.%]="uploadProgress" 
                   role="progressbar">
                {{ uploadProgress | number:'1.0-0' }}%
              </div>
            </div>
            <div class="upload-status">
              <i class="fas fa-spinner fa-spin me-2"></i>
              <span>Upload en cours...</span>
            </div>
          </div>
          }
          
          <!-- Hidden file input -->
          <input #fileInput type="file" 
                 accept=".pdf,.doc,.docx" 
                 (change)="onFileSelected($event)" 
                 style="display: none;">
        </div>
      </div>
    </div>
  </div>
</div>
